<!--
  Generated template for the ShopPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  
     <expandable-header [scrollArea]="mycontent" headerHeight="125" [style.background]="getBackground(shop.bannerUrl)">
        <ion-item>
            <ion-title class="commerceName">
                {{shopName}}
              </ion-title>
        </ion-item>
        <ion-item>
            <ion-searchbar
            [(ngModel)]="text"
            [showCancelButton]="shouldShowCancel"
            (ionInput)="onInput($event)"
            (ionCancel)="onCancel($event)"
            placeholder="Buscar Productos">
          </ion-searchbar>
         </ion-item>
  
         
     </expandable-header>
  
     <ion-navbar color="primary">
      <ion-segment  [(ngModel)]="menu" color="primary" (ionChange)="segmentChanged($event)">
        <ion-segment-button (click)="changeMenus(i)" *ngFor="let menu of menus; let i = index" value="i" >
            {{menu.$value}}
        </ion-segment-button>
      </ion-segment>
  
     </ion-navbar>
 </ion-header>


<ion-content fullscreen #mycontent padding>
    <ion-grid>
        <ion-row *ngIf="text.length > 0">
            <h3  *ngIf="text.length > 0" class="menuC">Resultados para "{{text}}"</h3>
              <p *ngIf="results.length == 0 && results.length == 0">Lo sentmos no encontramos resultado para tu busqueda :(</p>
            <ion-col col-12>
                <ion-item *ngFor="let product of results" class="itemList">
                    <ion-thumbnail item-left>
                      <span *ngIf="isInCart(productobjectID)"class="numP">{{getCount(product.objectID)}}</span>
                      <img [src]="product.imageUrl" class="productImg" >
                      <ion-icon *ngIf="isInCart(product.objectID)" (click)="removeToCart(product.objectID)"ios="ios-remove-circle" md="md-remove-circle" class="controls" style="
                  margin-top: 2.6em;
              "></ion-icon>
                    </ion-thumbnail>
                    <ion-grid>
                      <ion-row class="price-container">
                        <ion-col col-10 class="title-container"><h2 class="title">{{product.product}} </h2></ion-col>
                        <ion-col col-2 style="text-align: center;"><p class="price">${{product.price.toFixed(2)}}</p></ion-col>
                      </ion-row>
              
                    </ion-grid>
                    <ion-row class="description-row">
                      <ion-col col-10 class="description-container">
                        <p class="description">{{product.description}}</p>
                      </ion-col>
                    </ion-row>
                   <ion-icon (click)="addToCart(product.objectID)" ios="ios-add-circle" md="md-add-circle" class="controls" style="
                  right: 0.6em;
              "></ion-icon>
              
                  </ion-item>
            </ion-col>
        </ion-row>
        <ion-row *ngFor="let menu of menus; let i = index" class="menuContainer">
                <h3 class="menuC" [attr.id]="i">{{menu.$value}}</h3>
          <ion-col col-12>
              <ion-item *ngFor="let product of filterByMenu(menu.$value, products)" class="itemList">
                  <ion-thumbnail item-left>
                    <span *ngIf="isInCart(product.$key)"class="numP">{{getCount(product.$key)}}</span>
                    <img [src]="product.imageUrl" class="productImg" >
                    <ion-icon *ngIf="isInCart(product.$key)" (click)="removeToCart(product.$key)"ios="ios-remove-circle" md="md-remove-circle" class="controls" style="
                margin-top: 2.6em;
            "></ion-icon>
                  </ion-thumbnail>
                  <ion-grid>
                    <ion-row class="price-container">
                      <ion-col col-10 class="title-container"><h2 class="title">{{product.product}} </h2></ion-col>
                      <ion-col col-2 style="text-align: center;"><p class="price">${{product.price.toFixed(2)}}</p></ion-col>
                    </ion-row>
            
                  </ion-grid>
                  <ion-row class="description-row">
                    <ion-col col-10 class="description-container">
                      <p class="description">{{product.description}}</p>
                    </ion-col>
                  </ion-row>
                 <ion-icon (click)="addToCart(product.$key)" ios="ios-add-circle" md="md-add-circle" class="controls" style="
                right: 0.6em;
            "></ion-icon>
            
                </ion-item>
          </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>
<ion-footer  class="cart" (click)="carT()" *ngIf="!empty">

  
    
        <ion-icon name="md-cart"></ion-icon>
        <span>(${{total.toFixed(2)}}) Ver carrito</span>
</ion-footer>
